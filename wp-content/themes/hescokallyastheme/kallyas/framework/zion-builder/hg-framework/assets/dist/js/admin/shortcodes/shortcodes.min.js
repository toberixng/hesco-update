!function r(s,a,d){function c(t,e){if(!a[t]){if(!s[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var i=a[t]={exports:{}};s[t][0].call(i.exports,function(e){return c(s[t][1][e]||e)},i,i.exports,r,s,a,d)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<d.length;e++)c(d[e]);return c}({1:[function(require,module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="znhgtfw-modal-wrapper">\r\n\t<div class="znhgtfw-modal-header">\r\n\t\t<div class="znhgtfw-modal-title">\r\n\t\t\tShortcodes\r\n\t\t</div>\r\n\t\t<button type="button" class="button-link media-modal-close">\r\n\t\t\t<span class="media-modal-icon">\r\n\t\t\t\t<span class="screen-reader-text">Close media panel</span>\r\n\t\t\t</span>\r\n\t\t</button>\r\n\t</div>\r\n\t<div class="znhgtfw-modal-content-wrapper">\r\n\t\t<div class="znhgtfw-modal-sidebar"></div>\r\n\t\t<div class="znhgtfw-modal-content">\r\n\t\t\t<div class="znhgtfw-shortcode-mngr-nothing-selected">\r\n\t\t\t\t<p>Choose a shortcode from the sidebar to get started.</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="znhgtfw-modal-footer">\r\n\t\t<div class="znhgtfw-footer-nav">\r\n\t\t\t<a href="#" class="znhgtfw-button znhg-shortcode-insert">Insert shortcode</a>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n<div class="znhgtfw-modal-backdrop"></div>';return __p}},{}],2:[function(e,t,n){t.exports=Backbone.Model.extend({defaults:{id:"shortcode-tag",name:"Shortcode Name",section:"Section",description:"Shortcode description",params:[]},setSelected:function(){this.collection.setSelected(this)}})},{}],3:[function(e,t,n){var o=Backbone.Collection.extend({model:e("./shortcodeModel"),initialize:function(){this.selected=null},bySection:function(t){return filtered=this.filter(function(e){return e.get("section")===t}),new o(filtered)},setSelected:function(e){this.selected&&this.selected.set({selected:!1}),e.set({selected:!0}),this.selected=e,this.trigger("shortcodeSelected",e)},getSelected:function(){return this.selected}});t.exports=o},{"./shortcodeModel":2}],4:[function(e,t,n){if(window.znhg=window.znhg||{},void 0===window.ZnHgShManager)throw new Error("Error: ZnHgShManager was not found.");function o(){}var i,r,s;znhgShortcodesManagerData={},znhgShortcodesManagerData.sections=ZnHgShManager.sections,znhgShortcodesManagerData.shortcodes=ZnHgShManager.shortcodes,i=jQuery,r=e("./views/modal"),s=e("./models/shortcodesCollection"),o.prototype.start=function(){return i(document).on("click","#znhgtfw-shortcode-modal-open",function(e){e.preventDefault(),this.openModal()}.bind(this)),this.shortcodesCollection=new s(znhgShortcodesManagerData.shortcodes),this},o.prototype.openModal=function(){void 0===this.modalView&&(this.modalView=new r({collection:this.shortcodesCollection,app:this}))},o.prototype.closeModal=function(){this.modalView=void 0},znhg.shortcodesManager=(new o).start()},{"./models/shortcodesCollection":3,"./views/modal":5}],5:[function(e,t,n){var o=e("./navView");t.exports=Backbone.View.extend({id:"znhgtfw-shortcodes-modal",template:e("../html/modal.html"),events:{"click .znhgtfw-modal-backdrop":"modalClose","click .media-modal-close":"modalClose","click .znhg-shortcode-insert":"insertShortcode"},initialize:function(e){this.mainApp=e.app,this.listenTo(this.collection,"shortcodeSelected",this.renderParams),this.render()},render:function(){return this.$el.html(this.template()),this.$(".znhgtfw-modal-sidebar").append((new o).render().$el),jQuery("body").append(this.$el).addClass("znhgtfw-modal-open"),this},modalClose:function(){this.$el.remove(),jQuery("body").removeClass("znhgtfw-modal-open"),this.mainApp.closeModal(),this.remove()},renderParams:function(e){this.paramsCollection=znhg.optionsMachine.setupParams(e.get("params"));var t=znhg.optionsMachine.renderOptionsGroup(this.paramsCollection);this.$(".znhgtfw-modal-content").html(t)},insertShortcode:function(e){var t=this.collection.selected.get("id"),n=this.paramsCollection.where({isChanged:!0}),o=this.collection.selected.get("hasContent")||!1,i=this.collection.selected.get("defaultContent")||!1,r="["+t;_.each(n,function(e){return"content"===e.get("id")?(o=!0,i=e.get("value"),!0):void(r+=" "+e.get("id")+'="'+e.get("value")+'"')}),r+="]",i&&(r+=i),o&&(r+="[/"+t+"]"),window.wp.media.editor.insert(r),this.modalClose()}})},{"../html/modal.html":1,"./navView":8}],6:[function(e,t,n){t.exports=Backbone.View.extend({tagName:"li",events:{click:"selectShortcode"},render:function(){return this.$el.html(jQuery('<a href="#">'+this.model.get("name")+"</a>")),this},selectShortcode:function(){this.model.setSelected()}})},{}],7:[function(e,t,n){var o=e("./navItem");t.exports=Backbone.View.extend({tagName:"ul",className:"znhgtfw-modal-menu-dropdown",render:function(){return this.collection.each(function(e){this.$el.append(new o({model:e}).render().$el)}.bind(this)),this}})},{"./navItem":6}],8:[function(e,t,n){var o=e("./navSection");t.exports=Backbone.View.extend({tagName:"ul",className:"znhgtfw-modal-menu",events:{"click > li > a":"toggleSection"},render:function(){return _(znhgShortcodesManagerData.sections).each(function(e){var t=jQuery("<li></li>");t.append('<a href="#">'+e+"</a>"),t.append(new o({collection:znhg.shortcodesManager.shortcodesCollection.bySection(e)}).render().$el),this.$el.append(t)}.bind(this)),this},toggleSection:function(e){this.$el.find("li").removeClass("active"),jQuery(e.target).parent().addClass("active")}})},{"./navSection":7}]},{},[4]);